local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")


local INTERMISSION_TIME = 5
local ROUND_TIME =  10
local MIN_PLAYERS = 1



local round_event = ReplicatedStorage:WaitForChild("round")
local intermission_event = ReplicatedStorage:WaitForChild("intermission")


local function TeleportPlayers(cframe)
	local players = Players:GetPlayers()
	for i, player in ipairs(players) do
		if not player.Character then continue end
		
		player.Character:PivotTo(cframe)
	end
end


local function Countdown(duration)
	
	
	for i = duration , 1, -1 do
		
		task.wait(1)
	end
	
end


local function Intermision()
	intermission_event:FireAllClients()
	
	TeleportPlayers(workspace.SpawnLocation.CFrame + Vector3.new(0,2,0))
	
	Countdown(INTERMISSION_TIME)
	
	
	
	
end


local function RunGame()
	round_event:FireAllClients()
	local spawnLocation = workspace.Example.Spawn
	TeleportPlayers(spawnLocation.CFrame)
	
	Countdown(ROUND_TIME)	
end







while true do
	
	
	
	if #Players:GetPlayers() >=	MIN_PLAYERS then
		
		Intermision()
		RunGame()
		
		print("Starting game")
		
		
		
	
	else
		
		print("Not enough players")
		
		task.wait(1)
	end
	
end
